<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>RedactedCraft VR | Fully Immersive</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
    <style>
      .a-enter-vr-button { background-color: #4e9a06 !important; }
    </style>
  </head>
  <body>
    <a-scene>
      <a-entity environment="preset: pixel; seed: 42; dressingAmount: 50; grid: dots; groundColor: #222; skyColor: #111; horizonColor: #333;"></a-entity>
      
      <a-assets>
        <img id="logo" src="../assets/img/logo.png">
        <!-- Textures are relative to the root/assets/img/ -->
      </a-assets>

      <a-entity id="rig" position="0 0 5">
        <a-camera look-controls wasd-controls>
          <a-cursor color="#4e9a06" fuse="false" raycaster="objects: .clickable"></a-cursor>
          
          <!-- Persistent HUD Exit Button -->
          <a-entity class="clickable" id="exit-btn-hud" 
                    position="0.8 -0.5 -1" 
                    geometry="primitive: plane; width: 0.3; height: 0.1"
                    material="color: #333; opacity: 0.8"
                    onclick="window.location.href='../'">
            <a-text value="EXIT VR" align="center" color="#fff" width="1"></a-text>
          </a-entity>
        </a-camera>
        <a-entity laser-controls="hand: left" raycaster="objects: .clickable; far: 10; showLine: true;"></a-entity>
        <a-entity laser-controls="hand: right" raycaster="objects: .clickable; far: 10; showLine: true;"></a-entity>
      </a-entity>

      <!-- Site Container -->
      <a-entity id="site-container" position="0 1.5 -3.5">
        
        <!-- Header -->
        <a-image src="#logo" width="2" height="0.5" position="0 1.8 0" transparent="true"></a-image>

        <!-- Navigation -->
        <a-entity id="nav-group" position="0 1.3 0">
           <a-entity class="clickable nav-btn" data-target="home" position="-1.4 0 0" geometry="primitive: plane; width: 0.6; height: 0.25" material="color: #4e9a06">
             <a-text value="HOME" align="center" position="0 0 0.01" color="#fff" width="2"></a-text>
           </a-entity>
           <a-entity class="clickable nav-btn" data-target="assets" position="-0.7 0 0" geometry="primitive: plane; width: 0.6; height: 0.25" material="color: #444">
             <a-text value="TEXTURES" align="center" position="0 0 0.01" color="#fff" width="2"></a-text>
           </a-entity>
           <a-entity class="clickable nav-btn" data-target="lore" position="0 0 0" geometry="primitive: plane; width: 0.6; height: 0.25" material="color: #444">
             <a-text value="LORE" align="center" position="0 0 0.01" color="#fff" width="2"></a-text>
           </a-entity>
           <a-entity class="clickable nav-btn" data-target="coding" position="0.7 0 0" geometry="primitive: plane; width: 0.6; height: 0.25" material="color: #444">
             <a-text value="DEVLOG" align="center" position="0 0 0.01" color="#fff" width="2"></a-text>
           </a-entity>
           <a-entity class="clickable nav-btn" data-target="about" position="1.4 0 0" geometry="primitive: plane; width: 0.6; height: 0.25" material="color: #444">
             <a-text value="ABOUT" align="center" position="0 0 0.01" color="#fff" width="2"></a-text>
           </a-entity>
        </a-entity>

        <!-- Dynamic Content Area -->
        <a-entity id="content-area">
          
          <!-- HOME -->
          <a-entity id="panel-home" class="panel" visible="true">
            <a-plane color="#2d2d2d" width="4.2" height="2.2" position="0 0 -0.1"></a-plane>
            <a-text value="The Art of the Pixel" align="center" position="0 0.8 0" color="#e9b96e" width="4.5"></a-text>
            <a-text value="Redactedcraft is an experimental voxel project built from scratch in C# using MonoGame. Focused on performance and aesthetic clarity." 
                    align="center" position="0 0.3 0" color="#f0f0f0" width="3.5" wrap-count="40"></a-text>
            
            <a-text value="ENGINE ARCHITECTURE" align="center" position="0 -0.2 0" color="#e9b96e" width="3"></a-text>
            <a-text value="- Infinite Terrain via Simplex Noise
- Optimized Greedy Meshing
- EOS Multiplayer Integration" 
                    align="center" position="0 -0.6 0" color="#ccc" width="3"></a-text>
          </a-entity>

          <!-- TEXTURES -->
          <a-entity id="panel-assets" class="panel" visible="false">
            <a-plane color="#2d2d2d" width="4.2" height="2.2" position="0 0 -0.1"></a-plane>
            <a-text value="BLOCK LIBRARY" align="center" position="0 0.9 0" color="#e9b96e" width="4.5"></a-text>
            <a-entity id="vr-texture-grid" position="0 0.1 0"></a-entity>
          </a-entity>

          <!-- LORE -->
          <a-entity id="panel-lore" class="panel" visible="false">
            <a-plane color="#2d2d2d" width="4.2" height="2.2" position="0 0 -0.1"></a-plane>
            <a-text value="WORLD LORE" align="center" position="0 0.8 0" color="#e9b96e" width="4.5"></a-text>
            <a-text value="The history of Redactedcraft is still being written.

In this void, only the blocks remain..." 
                    align="center" position="0 0.2 0" color="#f0f0f0" width="3.5"></a-text>
          </a-entity>

          <!-- DEVLOG -->
          <a-entity id="panel-coding" class="panel" visible="false">
            <a-plane color="#2d2d2d" width="4.2" height="2.2" position="0 0 -0.1"></a-plane>
            <a-text value="DEVELOPER UPDATES" align="center" position="0 0.9 0" color="#e9b96e" width="4.5"></a-text>
            <a-text id="devlog-content" value="Loading logs..." align="center" position="0 0.1 0" color="#ccc" width="3.2" wrap-count="35"></a-text>
          </a-entity>

          <!-- ABOUT -->
          <a-entity id="panel-about" class="panel" visible="false">
            <a-plane color="#2d2d2d" width="4.2" height="2.2" position="0 0 -0.1"></a-plane>
            <a-text value="SOLO DEVELOPMENT" align="center" position="0 0.8 0" color="#e9b96e" width="4.5"></a-text>
            <a-text value="Redactedcraft is a passion project developed by Redacted. The goal is to build a high-performance foundation for voxel games that respects retro aesthetics." 
                    align="center" position="0 0.2 0" color="#f0f0f0" width="3.5" wrap-count="40"></a-text>
            <a-text value="Follow the project on YouTube, Twitch, and Instagram!" align="center" position="0 -0.5 0" color="#4e9a06" width="3"></a-text>
          </a-entity>

        </a-entity>

      </a-entity>

      <!-- Scenery -->
      <a-box position="-6 1 -4" src="../assets/img/grass.png" animation="property: rotation; to: 0 360 360; loop: true; dur: 20000"></a-box>
      <a-box position="6 2 -4" src="../assets/img/diamond.png" animation="property: rotation; to: 360 0 360; loop: true; dur: 15000"></a-box>
      <a-box position="0 -0.5 0" scale="20 0.1 20" material="color: #111; opacity: 0.5"></a-box>

    </a-scene>

    <script>
      const textures = [
        'grass', 'dirt', 'stone', 'sand', 'gravel', 'wood', 'leaves', 'water',
        'plank', 'glass', 'artificer_bench', 'chest', 'coal', 'iron', 'gold', 'diamond'
      ];

      const logs = [
        "JAN 12: EOS Fixes & Repo Cleanup\n- Updated service URLs\n- Cleaned redundant SDK files",
        "JAN 11: Pro Build Tools\n- Unified Build GUI implemented\n- Automated publishing support",
        "JAN 10: Smart Asset Sync\n- Faster startup via GitHub API checks\n- Improved launcher UX",
        "DEC 20: Greedy Meshing\n- 400% performance increase in terrain rendering"
      ];

      // Init Texture Grid
      const grid = document.getElementById('vr-texture-grid');
      textures.forEach((id, i) => {
        const x = (i % 4) * 0.9 - 1.35;
        const y = Math.floor(i / 4) * -0.45 + 0.45;
        
        const box = document.createElement('a-box');
        box.setAttribute('position', `${x} ${y} 0`);
        box.setAttribute('scale', '0.3 0.3 0.3');
        box.setAttribute('src', `../assets/img/${id}.png`);
        box.setAttribute('animation', 'property: rotation; to: 0 360 0; loop: true; dur: 6000; easing: linear');
        grid.appendChild(box);

        const txt = document.createElement('a-text');
        txt.setAttribute('value', id.replace('_', ' '));
        txt.setAttribute('align', 'center');
        txt.setAttribute('position', `${x} ${y - 0.25} 0.05`);
        txt.setAttribute('width', '1.2');
        grid.appendChild(txt);
      });

      // Init DevLog
      document.getElementById('devlog-content').setAttribute('value', logs.join('\n\n'));

      // Navigation
      document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const target = btn.getAttribute('data-target');
          
          // UI Feedback
          document.querySelectorAll('.nav-btn').forEach(b => b.setAttribute('material', 'color', '#444'));
          btn.setAttribute('material', 'color', '#4e9a06');
          
          // Switch Panels
          document.querySelectorAll('.panel').forEach(p => p.setAttribute('visible', 'false'));
          document.getElementById('panel-' + target).setAttribute('visible', 'true');
        });
      });

      // Unified Click Handler for window.location
      document.querySelectorAll('.clickable').forEach(el => {
        el.addEventListener('click', () => {
          const clickAttr = el.getAttribute('onclick');
          if (clickAttr && clickAttr.includes('window.location')) {
            const url = clickAttr.match(/'([^']+)'/)[1];
            window.location.href = url;
          }
        });
      });
    </script>
  </body>
</html>
